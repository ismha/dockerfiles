version: "3"

services:

  # -- Authentication & System Management
  # -------------------------------------------------

  # generates NettyApps ERP Authorization Api site
  netty-demo-login:
    image: registry.nettyapps.com.tr/netty/restapi/authorization:latest
    container_name: netty-demo-login
    environment:
      - CONNECTION_STRING=${DB_CONNECTION_STRING}
      - MAXWRONGTRY=5
      - TIMEOUTDURATION=90
      - TZ=Europe/Istanbul
      - REDIS_CONNECTION=netty-redis:6379,password=nâ‚¬tty
      - REDIS_INSTANCE=Demo_
    #depends_on:
    #  - netty-redis    
    ports:
      - 8401:80
      - 28401:443
    volumes:
      - ./logs/login:/app/logs/      
    cap_add:
      - "NET_BIND_SERVICE"
    restart: unless-stopped
    networks:
      - netty-network

  # generates NettyApps ERP Admin site
  netty-demo-admin:
    image: registry.nettyapps.com.tr/netty/angular/admin-portal:latest
    container_name: netty-demo-admin
    environment:
      - API_URL=https://demo.nettyapps.com/adminapi
      - ADMIN_URL=https://demo.nettyapps.com/login
      - BASE_HREF=/admin/
      - APPLICATION=AdminPortal
      - TZ=Europe/Istanbul
    ports:
      - 8402:80
      - 28402:443
    cap_add:
      - NET_BIND_SERVICE
    restart: unless-stopped
    networks:
      - netty-network

  # generates NettyApps ERP Admin Api site
  netty-demo-adminapi:
    image: registry.nettyapps.com.tr/netty/restapi/admin-portal:latest
    container_name: netty-demo-adminapi
    environment:
      - CONNECTION_STRING=${DB_CONNECTION_STRING}
      - MAXWRONGTRY=5
      - TIMEOUTDURATION=90
      - TZ=Europe/Istanbul
    depends_on:
      - netty-redis
    ports:
      - 8403:80
      - 28403:443
    volumes:
      - ./logs/admin:/app/logs/         
    cap_add:
      - "NET_BIND_SERVICE"
    restart: unless-stopped
    networks:
      - netty-network

  # -- ERP Solution
  # # -------------------------------------------------

  # generates NettyApps ERP Angular site
  netty-demo-erp:
    image: registry.nettyapps.com.tr/vargonen/angular/erp:live
    container_name: netty-demo-erp
    environment:
      - API_URL=https://demo.nettyapps.com/erpapi
      - ADMIN_URL=https://demo.nettyapps.com/login
      - BASE_HREF=/erp/
      - APPLICATION=ERP
      - TZ=Europe/Istanbul
    ports:
      - 8404:80
      - 28404:443
    cap_add:
      - NET_BIND_SERVICE
    restart: unless-stopped
    networks:
      - netty-network

  # generates NettyApps ERP Api site
  netty-demo-erpapi:
    image: registry.nettyapps.com.tr/vargonen/restapi/erp:live
    container_name: netty-demo-erpapi
    environment:
      - CONNECTION_STRING=${DB_CONNECTION_STRING}
      - MAXWRONGTRY=5
      - TIMEOUTDURATION=90
      - TZ=Europe/Istanbul
      - LICENSECHECKWEBSITE=${LICENSER_WEBSITE}
      - APPLICATION=ERP
    ports:
      - 8405:80
      - 28405:443
    volumes:
      - ./logs/erp:/app/logs/
    cap_add:
      - NET_BIND_SERVICE
    restart: unless-stopped
    networks:
      - netty-network


  # Vendor
  # -------------------------------------------------
  netty-demo-vendor:
    image: registry.nettyapps.com.tr/vargonen/angular/vendor:live
    container_name: netty-demo-vendor
    environment:
      - API_URL=https://demo.nettyapps.com/vendorapi
      - ADMIN_URL=https://demo.nettyapps.com/login
      - BASE_HREF=/hr/
      - APPLICATION=BYCVendor
      - TZ=Europe/Istanbul
    ports:
      - 8406:80
      - 28406:443
    cap_add:
      - NET_BIND_SERVICE
    # volumes:
    #   - ./reverse_proxy/ssl/star.nettyapps.com.crt:/etc/ssl/certs/star.nettyapps.com.crt:ro
    #   - ./reverse_proxy/ssl/star.nettyapps.com.key:/etc/ssl/private/star.nettyapps.com.key:ro
    restart: unless-stopped
    networks:
      - netty-network

  netty-demo-vendorapi:
    image: registry.nettyapps.com.tr/vargonen/restapi/vendor:live
    container_name: netty-demo-vendorapi
    environment:
      - CONNECTION_STRING=${DB_CONNECTION_STRING}
      - MAXWRONGTRY=5
      - TIMEOUTDURATION=90
      - TZ=Europe/Istanbul
  #    - APPLICATION=BYCVendor
    ports:
      - 8407:80
      - 28407:443
    volumes:
      - ./logs/vendor:/app/logs/
    cap_add:
      - NET_BIND_SERVICE
    restart: unless-stopped
    networks:
      - netty-network

  # Pricing
  # -------------------------------------------------
  # generates nettyapps BYC site
  netty-demo-pricing:
    image: registry.nettyapps.com.tr/vargonen/angular/pricing:live
    container_name: netty-demo-pricing
    environment:
      - API_URL=https://demo.nettyapps.com/pricingapi
      - ADMIN_URL=https://demo.nettyapps.com/login
      - BASE_HREF=/isgelistirme/
      - APPLICATION=BYCPricing
      - TZ=Europe/Istanbul
    ports:
      - 8408:80
      - 28408:443
    cap_add:
      - NET_BIND_SERVICE
    restart: unless-stopped
    networks:
      - netty-network


  # generates nettyapps BYC Api site
  netty-demo-pricingapi:
    image: registry.nettyapps.com.tr/vargonen/restapi/pricing:live
    container_name: netty-demo-api
    environment:
      - CONNECTION_STRING=${DB_CONNECTION_STRING}
      - MAXWRONGTRY=5
      - TIMEOUTDURATION=90
      - TZ=Europe/Istanbul
   #   - APPLICATION=BYCPricing
    ports:
      - 8409:80
      - 28409:443
    volumes:
      - ./logs/pricing:/app/logs/
    cap_add:
      - NET_BIND_SERVICE
    restart: unless-stopped
    networks:
      - netty-network

  # Offer
  # -------------------------------------------------
  netty-demo-offer:
    image: registry.nettyapps.com.tr/vargonen/angular/offer:live
    container_name: netty-demo-offer
    environment:
      - API_URL=https://demo.nettyapps.com/offerapi
      - ADMIN_URL=https://demo.nettyapps.com/login
      - BASE_HREF=/offer/
      - APPLICATION=BYCOffer
      - TZ=Europe/Istanbul
    ports:
      - 8410:80
      - 28410:443
    cap_add:
      - NET_BIND_SERVICE
    restart: unless-stopped
    networks:
      - netty-network

  netty-demo-offerapi:
    image: registry.nettyapps.com.tr/vargonen/restapi/offer:live
    container_name: netty-demo-offerapi
    environment:
      - CONNECTION_STRING=${DB_CONNECTION_STRING}
      - MAXWRONGTRY=5
      - TIMEOUTDURATION=90
      - TZ=Europe/Istanbul
   #   - APPLICATION=BYCOffer
    ports:
      - 8411:80
      - 28411:443
    volumes:
      - ./logs/offer:/app/logs/
    cap_add:
      - NET_BIND_SERVICE
    restart: unless-stopped
    networks:
      - netty-network

  
networks:
   netty-network:
     name: netty-network
     external: true
     driver: bridge
